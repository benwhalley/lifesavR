<!--
TODO - have a ppt of the first explanatory part of this instead of a blank screen
 -->

Ok this is a slightly longer video. In the first bit we introduce some
background to the term variable, and the way in which R stores different types of
data. In the final part we see why this is important when we're making plots (and
running other analyses).

I'm especially going to talk about:

- the different types of variable we may have in our study (e.g. continuous, categorical, text)
- the way R stores these different data (e.g. as numeric, factor or character data) and
- the way that `ggplot()` presents these different data types


These might seem like small details — but having some understanding of what is
happening will help later on: you will be able to control how your data are
presented in tables and plots. It will also help you make sure
your data are in the right format for other statistical tests.


### Columns vs variables

:::{.tip}

This is really important. Make sure you are clear on the different meanings of the word 'variable'

:::

The word *variable* gets used in at least 4 different ways in quantitative research,
and this confuses a lot of people.

We can't avoid all ambiguity because these different usages are common in the
field, but it helps to know about them in advance. The main usages are:


- *variables in a theoretical model*. That is, things or constructs we think exist, and which *cause* other things to happen. An example might be "empathy", or "working memory".
These are psychological constructs which many theories include, and those theories
say these constructs play a causal role in how we behave or perform on certain tasks.

- *variables in a study design*. An example here might an experimental group allocation,
or an attribute of participants like their age or gender.

- *variables in a dataset*. Sometimes people want to refer to a column of numbers in a dataset (e.g. a spreadsheet), where the column has a name, and use the term variable again. This usage overlaps with the previous two, but it doesn't _have_ to. For example, we might have a column of numbers recording the date and time participants' completed an empathy questionnaire. Analysed a certain way these timestamps _might_ tell us something useful, but the column of timestamps isn't a variable in our theoretical model, and they might not be used as a variable in our experiment.

[ Finally, we have ]

- *variables in R and computer programs*: This type of variable is a *general purpose container* which can store anything. Variables in R *can* contain columns of numbers, but they can also contain whole datasets, or graphs, or the results of statistical tests. **A variable in R often isn't the same thing as an experimental variable or a column in a dataset**.




**In this short course use *variable* to mean either an experimental/theoretical variable or an R container.**

**When we mean a column of data in a dataset we will use the word *column* instead.**



### Types of variable

OK so let's focus for a minute
on *variables in a study design*.

There are a few main *types* of these variable to consider. You might be
familiar with some of these terms already:

- *categorical* or *nominal* variables (sometimes also called *factors*): e.g. gender, education status

- *binary* variables (a special category that is either `TRUE` or `FALSE`): e.g. smoker/non-smoker

- *ordinal* variables (categorical responses where the order is important): e.g. a 1-7 response on a Likert-style question

- *interval* or *continuous* variables: e.g. weight in kg, time in milliseconds

- *count* variables (a frequency, measured in whole numbers): e.g. the number of social contacts per week

- *text* variables: e.g. free text responses to open-ended questionnaire items



### Types of column

OK, so those are the types of variable.

We can also think about the types of column that our dataset stores.

Datasets have multiple columns, each with a unique name.

In R, every column has a *data type*. These data types are normally determined
by the type of variable. But there is some overlap, and different data types could
be used to store the same variable.

We sometimes need to convert between data types.

There are four data types you need to know about in R: factors, text, numeric and logical columns.

- *Factors*, which are used for categorical data (and sometimes ordinal data too)
- *Text*, also called *character* or *string* data.
- *Numeric* columns can called be either *integer* or *double*. Double is computer speak for 'double-precision number', which just means decimals and really big numbers are allowed
- *Logical*, which can be used to store values that can only be either True or False.


The important thing to know is that--- although different types of variable are usually stored in different types of column in R--- *this isn't always the case*.

Sometimes data can be stored as the wrong type---e.g.
categorical data could end up stored as numeric data --- and in these cases we
need to convert from one format to another.


You can see which data type is used to store a variable when using the `glimpse()` command introduced in
Session 1 (see [here](session-1.html#exploring)).

```{r}
iris %>% glimpse()
```

In the output you can see the variable names listed on the left, followed by text in angle brackets, e.g.: `<dbl>` which
is the abbreviated name of data type.

In this built-in dataset, most of the data is numeric (`dbl`), but the `Species` variable is categorical, and stored as a factor (`fct`).

It's possible to convert columns from one type to another, to suit our needs. We'll see more of this later.


| Data/column type | Useful for             | Abbreviations used/subtypes | Often need to convert from |
| ---------------- | ---------------------- | --------------------------- | -------------------------- |
| Factor           | categorical, ordinal   | `fct`, `ord`                | text                       |
| Text             | text, categorical      | `chr`                       | categorical                |
| Numeric          | continuous, ordinal    | `int`, `dbl`                | categorical; text          |
| Logical          | binary (boolean)       | `lgl`                       | numeric                    |




### Column types determine the scales on graphs

If we look at the `fuel` data (from `psydata`) we can see that most of the columns
are stored as numeric data (`dbl`):

```{r}
fuel %>% glimpse()
```

This is fine if we want to make a scatter plot.

In the example below we have 'miles per gallon' vs the weight of cars in the `fuel` dataset (in `psydata`):

```{r}
fuel %>%
  ggplot(aes(weight, mpg)) +
    geom_point()       
```

In this example of a scatterplot both the x and y axes are ***continuous***.
That is, we expect them to be real numbers, and they are stored as numeric columns.

However, if we want to make a boxplot of the `mpg` column using `cyl` (number of cylinders) as the `x` axis then we have a problem:

```{r}
fuel %>%
  ggplot(aes(cyl, mpg)) +
  geom_boxplot()
```

The warning message says `Continuous x aesthetic -- did you forget aes(group=...)?`. This is a
clue as to what has gone wrong.

We might have expected to see;

- miles per gallon on the $y$ axis
- three separate boxes, one each for 4, 6 and 8 cylinders

It didn't work as expected though.

R spots that `cyl` is _stored_ as numeric data, and because it doesn't know
better it creates a _continuous scale) on the $x$ axis.

Only one box is drawn at the midpoint of all the values of `cyl`;  because `cyl` ranges from
4 to 6 the box appears at 6.

Although R often has good defaults, it isn't smart — if it doesn't behave as we expect
we need to be more specific.

Here we want to use `cyl` as a categorical variable, so we need to give R precise instructions.
We should convert `cyl` to a `factor` explictly. Then our plot will work properly.

We can use the command `factor(cyl)` to tell R that the $x$-axis is a factor:

```{r}
fuel %>%
  ggplot(aes(factor(cyl), mpg)) +
  geom_boxplot()
```

This gives us the boxplot we were expecting.

The only change was to replace `cyl` with `factor(cyl)`. This tells R to convert the variable `cyl` to a factor, and  `ggplot()` can then set the scale of the x-axis correctly.
