---
title: 'Describing patterns, answering questions'
author: 'Ben Whalley, Paul Sharpe, Sonja Heintz'
# date: "April 2021"
bibliography: [references.bib]
csl: apa.csl
#biblio-style: apa6
link-citations: yes
output:
  webex::html_clean
---

```{r, include=F, echo=F}
source('_first_chunk.R')
```



```{html, child="bs-tab-fix.html"}
```


```{css, child="video.css"}
```


![](images/spotpatterns.png)


# Overview


An important task for quantitative researchers is to **answer questions using data**.
We can often divide this activity into:

- Describing patterns in the data
- Quantifying how *sure* we are about those patterns

This session is all about describing and visualising patterns in the data to answer research questions.



### Techniques covered

- [Central tendency and spread](#centralspread)
- [The *frequency* of responses](#responsefrequency)
- [Relationships](#relationships)

```{r, echo=F}
video_data <- list(identifier = "describe-overview", showcode = F,
yt_id="DNla39W33II")
# makermds(video_data)
```

```{r child = '_content/_video_tabs.rmd'}
```



# Central tendency and spread{#centralspread}

```{r, echo=F}
video_data <- list(identifier = "describe-centrantend", yt_id="4mn_XxnSjUQ")
# makermds(video_data)
```

```{r child = '_content/_video_tabs.rmd'}
```

:::{#ex1 .exercise}

<!-- REMEMBER TO UPDATE THE WORKBOOK IF YOU TOUCH THIS !!! -->

**Exercise 1**

1. Open `session-4.rmd` using the **Files** pane. This is the workbook you will be using in this session.
1. Use `group_by()` and `summarise()` with the built-in `iris` dataset to calculate the mean `Sepal.Width` for each `Species` of flower.
1. Make a boxplot that shows the sepal width for each species of flower.

These are the correct numbers to check your work against:

```{r, echo=F, include=T}
iris %>%
  group_by(Species) %>%
  summarise(`Mean sepal width` =  sprintf("%.1f", mean(Sepal.Width) )) %>%
  pander()
```

Your plot should look like this:

```{r, echo=F, include=T}
iris %>%
  ggplot(aes(Species, Sepal.Width)) +
  geom_boxplot()
```


```{r, echo=F, include=F}
aesmcqq <- c("aes(Species, Sepal.Width))", "aes('Species', 'Sepal.Width')", "aes((species, sepal.width))", answer="aes(Species, Sepal.Width)")
```


The `aes` part of your ggplot code should be: `r mcq(aesmcqq)`

:::



:::{.exercise}
**Exercise 2**

In the video you saw how to use `mutate()` to create a new column which is the difference between values in two other columns.

1. Using the `funimagery` dataset, create a column representing weight lost between end of treatment and at the end of
followup.
1. Make a boxplot of these data.

Your plot should look like this:

```{r, echo=FALSE}
funimagery.edited <- funimagery %>%
  mutate(weight_lost_trt_followup = kg3 - kg2)

funimagery.edited %>%
  ggplot(aes(intervention, weight_lost_trt_followup)) +
  geom_boxplot()
```

:::


# The *frequency* of responses{#responsefrequency}


```{r, echo=F}
video_data <- list(identifier = "describe-frequency", yt_id = "XB-b454apj4")
# makermds(video_data)
```

```{r child = '_content/_video_tabs.rmd'}
```


:::{.exercise}
**Exercise 3**

```{r, echo=F, include=F}
funcounts <- funimagery %>% count(intervention, gender)
```

1. Using the `funimagery` data and `count()` to count how many participants there were in each intervention group.
1. How many men were in the FIT group? `r mcq(c(12,14,answer=funcounts$n[4], 18, 33, 28))`

<!-- funimagery %>% count(intervention, gender) -->

:::




# Relationships {#relationships}

```{r, echo=F}
video_data <- list(identifier = "describe-relationships", yt_id="PGV-MZlCoOc")
# makermds(video_data)
```

```{r child = '_content/_video_tabs.rmd'}
```



:::{.exercise}
**Exercise 4**

1. Load the `corrr` package (use the `library()` function).
1. Use the `fuel` dataset from the `psydata` package, to calculate the correlation between `power` and `engine_size`?

:::


:::{.exercise}
**Exercise 5**

It's helpful to get a feel for what the data would look like for different correlation coefficients.
<http://guessthecorrelation.com> is a game designed to help with this.

- The game shows you a scatterplot; your job is to guess the correlation coefficient.
- Try and get to about 30 points without losing any lives!  If you like you can get competitive and play a two-player game!

- Play now: <http://guessthecorrelation.com>



:::


# Check your knowledge

Write an answer to each of these questions in the `Check your knowledge` section of your workbook. The answers will be
revealed in Session 5.



- What functions in R describe the central tendency of a variable?
- What type of column can we use with `mean`?
- How might you describe patterns in a categorical variable?
- What function did we use to create a new column in the `funinmagery` dataset?
- In the `funimagery` data, How much weight did FIT participants lose AFTER the end of treatment?
- What type of plot describes the relationship between two variables?
- What function do we use to make a plot that shows a relationship between two variables in `ggplot`?



# Extension exercises


```{r, child="_content/extension-exercises-premable.rmd"}
```


:::{.exercise}
**Extension exercise 1**

Correlations require that there is a *linear relationship* between the two variables. That is, the pattern in a
scatterplot should be fairly close to a straight line.

1. Plot pairs of variables from the `fuel` dataset.
2. Which pairs would be NOT be suitable for calculating a correlation?

`r hide()`

Engine size and MPG would be one example. There is a curved relationship between them:

```{r, echo=F, warning=F, message=F}
fuel %>% ggplot(aes(engine_size, mpg)) + geom_point() + geom_smooth(method=lm, formula=y~poly(x, 2), se=F)
```

The problem here is that a single straight line isn't appropriate for the data: The slope is
much less steep at the right hand side of the plot, but the correlation doesn't capture that, so
it's not a good statistic to describe the pattern we see here.



`r unhide()`

:::




# References
